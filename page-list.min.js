function pagelist(a,b){b=b||{},b.items=b.items||0,b.itemsOnPage=b.itemsOnPage||1,b.currentPage=b.currentPage||1,b.displayedPages=b.displayedPages||3,b.className=b.className||"page-list",b.rangeText=b.rangeText||"...",b.prevText=b.prevText||"<",b.nextText=b.nextText||">";var c=function(a,b,c){return Math.min(Math.max(a,b),c)},d=function(a,d){b.currentPage=c(d,1,a),b.onClick&&b.onClick(b.currentPage),f.draw(b.currentPage)},e=function(a,b,c,e){var f=$('<li name="'+c+'"></li>'),g=$('<a href="#page-'+c+'">'+(e||c)+"</a>");$(a).append(f.append(g.click(function(){d(b,c)})))},f={numItems:function(){return b.items},setItems:function(a){return b.items=a,this},currentPage:function(){return b.currentPage},setCurrentPage:function(a){return b.currentPage=a,this},itemsOnPage:function(){return b.itemsOnPage},setItemsOnPage:function(a){return b.itemsOnPage=a,this},numPages:function(){return Math.ceil(b.items/b.itemsOnPage)},firstItemOnPage:function(a){return a?(a-1)*b.itemsOnPage:0},getPageFromIndex:function(a){return a?Math.ceil(a/b.itemsOnPage):1},draw:function(d){for(b.currentPage=d||b.currentPage;a.firstChild;)a.removeChild(a.firstChild);var f=a.appendChild(document.createElement("ul")),g=this.numPages();b.currentPage=c(b.currentPage,1,g);var h=c(b.currentPage+b.displayedPages,0,g),i=c(b.currentPage-b.displayedPages-1,0,h),j=2*b.displayedPages+1;i=h==g?Math.max(h-j,0):i,h=0==i?Math.min(j,g):h,e(f,g,b.currentPage-1,b.prevText),i>0&&e(f,g,1),i>1&&e(f,g,b.currentPage-j,b.rangeText);for(var k=i*b.itemsOnPage;k<b.items&&i<h;)e(f,g,++i),k+=b.itemsOnPage;return h<g-1&&e(f,g,b.currentPage+j,b.rangeText),h<g&&e(f,g,g),e(f,g,b.currentPage+1,b.nextText),f.setAttribute("class",b.className),$("li[name='"+b.currentPage+"']",f).html(b.currentPage),this}};return f}
